<!--pages/repair/repair.wxml-->
<view class="out">
    <view class="tabs">
        <view class="{{categoryCur==0?'tab-self':'tab-share'}}" bindtap="checkPri">{{categoryMenu[0]}}</view>
        <view class="{{categoryCur!=0?'tab-self':'tab-share'}}" style="margin-left: 34rpx" bindtap="checkPub">
            {{categoryMenu[1]}}
        </view>
    </view>
    <swiper style="margin-top: 136rpx;height: 100%" current="{{categoryCur}}" duration="{{duration}}"
            bindanimationfinish="animationFinish">
        <swiper-item wx:for="{{categoryData}}" wx:key="index">
            <scroll requesting="{{item.requesting}}"
                    scrollTop="{{scrollTop}}"
                    end="{{item.end}}"
                    empty-show="{{item.emptyShow}}"
                    list-count="{{item.listData.length}}" top-size="0" bottom-size="{{120}}" bind:refresh="refresh"
                    bind:more="more" style="padding-top: 0rpx">
                <view class="cells">
                    <view class="cell" wx:for="{{item.listData}}" wx:key="index" bindtap="">
                        <view class="titles">
                            <view class="title-name">报修时间</view>
                            <view class="title">{{item.reporttime}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">工单编号</view>
                            <view class="title">{{item.id}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">设备类型</view>
                            <view class="title">{{item.type2name}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">报修设备</view>
                            <view class="title">{{item.device}}</view>
                        </view>
                        <view class="titles" hidden="{{categoryCur==1}}">
                            <view class="title-name">发起人</view>
                            <view class="title">{{item.reportinfo.realname}}</view>
                        </view>
                        <view class="titles" hidden="{{categoryCur==1}}">
                            <view class="title-name">发起人电话</view>
                            <view class="title under-line" data-src="{{item.reportinfo.phone}}" bindtap="makeCall">
                                {{item.reportinfo.phone}}
                            </view>
                        </view>
                        <view class="titles" hidden="{{categoryCur==1}}">
                            <view class="title-name">发起人所在部门</view>
                            <view class="title" data-src="{{item.reportinfo.dep_name}}">{{item.reportinfo.dep_name}}
                            </view>
                        </view>
                        <view class="titles" hidden="{{categoryCur==1}}">
                            <view class="title-name">发起人所在班级</view>
                            <view class="title" data-src="{{item.reportinfo.phone}}">
                                {{item.reportinfo.classmaster_classname}}
                            </view>
                        </view>
                        <view class="titles">
                            <view class="title-name">接单人</view>
                            <view class="title">{{item.repairerinfo.realname}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">工单状态</view>
                            <view class="title">{{item.statusStr}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">完成时间</view>
                            <view class="title">{{item.completetime}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">工单详情</view>
                        </view>
                        <view class="titles">
                            <view class="remark">{{item.remark}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">详细地址</view>
                            <view class="title">{{item.addr}}</view>
                        </view>
                        <view class="titles">
                            <view class="title-name">上传图片</view>
                        </view>
                        <view class="cells-image">
                            <view class="cell-image" wx:for="{{item.fileinfo}}" wx:key="index">
                                <image class="image" src="{{item.url}}" mode="aspectFill" data-src="{{item.url}}"
                                       bindtap="preview"/>
                            </view>
                        </view>
                        <view class="titles">
                            <view class="title-name">工单完成备注</view>
                        </view>
                        <view class="titles">
                            <view class="remark">{{item.completeremark}}</view>
                        </view>
                        <view class="bottom" wx:if="{{item.isBottom}}">
                            <view class="action0" wx:if="{{item.isAction0}}" data-bean="{{item}}"
                                  bindtap="{{item.action0}}">{{item.action0Str}}
                            </view>
                            <view class="action1" wx:if="{{item.isAction1}}" data-bean="{{item}}"
                                  bindtap="{{item.action1}}">{{item.action1Str}}
                            </view>
                        </view>
                    </view>
                </view>
            </scroll>
        </swiper-item>
    </swiper>
    <picker bindchange="doAdd" bindtap=""
            data-type="indexAct" value="{{}}" range="{{types}}" range-key="name">
        <image class="addBtn" bindtap="" src="../../assets/images/ic_add_common.png" mode="widthFix"></image>
    </picker>
</view>

<page-container
        show="{{showDialog}}"
        overlay="{{overlay}}"
        close-on-slide-down
        duration="300"
        position="bottom"
        z-index="999"
        round
        bindclickoverlay="onClickOverlay"
        overlayStyle='z-index:99'
        customStyle='z-index:999'
>
    <view wx:if="{{show}}" class="layout0">
        <view class="bRemark">{{dialogTitle}}</view>
        <view wx:if="{{showShift||showDelay}}" class="cells-shift">
            <view class="{{item.checked?'shift0':'shift1'}}" wx:for="{{types2}}" wx:key="index" data-index="{{index}}" bindtap="checkType">
                <view >
                    {{item.name}}
                </view>
            </view>
        </view>
        <textarea wx:if="{{showFinish}}" class="bInput" placeholder="请填写您的备注内容" bindinput="doInput" data-type="remark" value=""/>
        <view class="other" wx:if="{{showDelay}}">
            <view class="hint" style="font-size: 24rpx;margin-top: 40rpx">其他原因</view>
            <input class="cInput" placeholder="最多输入10个字" maxlength="10" bindinput="doInput" data-type="delay" value=""/>
        </view>
        <view class="bAction" bindtap="doBtnFinish">提交</view>
    </view>
</page-container>

