<!--pages/attendance/attendance.wxml-->
<view class="out">
    <view class="head-area">
        <view class="head-line0"> {{todayStr}}</view>
        <view class="head-line">
            <picker bindchange="bindPickerChange" style="margin-right: 40rpx" data-type="indexType" value="{{index}}"
                    range="{{typeArrays}}">
                <view class="head-block">
                    <view class="picker">
                        {{typeArrays[indexType]}}
                    </view>
                    <image src="/assets/images/ic_gray_triangle.png" style="margin-left: 4rpx;height: 10rpx"
                           mode="heightFix"/>
                </view>
            </picker>
            <picker wx:if="{{isMaster}}" bindchange="bindPickerChange" style="margin-right: 40rpx"
                    data-type="indexClass" value="{{index}}" range="{{classArrays}}">
                <view class="head-block">
                    <view class="picker">
                        {{classArrays[indexClass]}}
                    </view>
                    <image src="/assets/images/ic_gray_triangle.png" style="margin-left: 4rpx;height: 10rpx"
                           mode="heightFix"/>
                </view>
            </picker>
            <picker wx:if="{{isMaster}}" mode="date" value="{{date}}" start="2015-09-01" end="2025-09-01"
                    data-type="indexClass" bindchange="bindDateChange">
                <view class="head-block">
                    <view class="picker">
                        {{date}}
                    </view>
                    <image src="/assets/images/ic_gray_triangle.png" style="margin-left: 4rpx;height: 10rpx"
                           mode="heightFix"/>
                </view>
            </picker>
        </view>
    </view>
    <emptyView wx:if="{{isEmpty}}"/>

    <scroll-view wx:else class="cells-master" enable-flex scroll-y>
        <block wx:if="{{mode=='master'}}">
            <view class="cell" wx:for="{{mData}}" wx:key="index" bindtap="doDetail">
                <view class="title-area">
                    <view class="stu-code">
                        {{item.cno}}
                    </view>
                    <view class="stu-name singleLine">
                        {{item.realname}}
                    </view>
                    <view class="stu-att-tag">
                        <view class="cell" wx:for="{{item.tags}}" wx:for-index="idx" wx:for-item="bean" wx:key="idx">
                            <view class="tag">{{bean}}</view>
                        </view>
                    </view>
                </view>
            </view>
        </block>

        <view wx:elif="{{mode=='tea'||mode=='stu-ad'}}" class="tea-course-cells">
            <view class="cell" wx:for="{{mData}}" wx:key="index" data-data="{{item}}" bindtap="doClickCourse">
                <view class="tea-course-area">
                    <view class="tea-course-name">
                        {{item.classname}}
                    </view>
                    <view class="tea-course-time">
                        {{item.crstime}}
                    </view>
                    <view class="tea-course-time">
                        {{item.classroomname}}
                    </view>
                    <image class="tea-course-image" src="/assets/images/ic_next_round_gray.png">

                    </image>

                </view>
            </view>
        </view>

        <view wx:elif="{{mode=='stu'}}" class="stu-data-cells">
            <view class="cell" wx:for="{{mData}}" wx:key="index">
                <view class="stu-data-area">
                    <view class="stu-leave-name">
                        {{item.name}}
                    </view>
                    <view class="stu-leave-num">
                        {{item.total+item.unit}}
                    </view>

                </view>
            </view>
        </view>

        <view wx:elif="{{mode=='school'}}" class="school-data-cells">
            <view class="cell" wx:for="{{mData}}" wx:key="index">
                <view class="school-data-area">
                    <view class="title-school" style="display: flex;justify-content: space-between">
                        <view class="school-leave-name">
                            {{item.name}}
                        </view>
                        <view class="school-leave-num">
                            {{item.value}}
                        </view>
                    </view>
                    <view class="cells-school-item">
                        <view wx:for="{{item.list}}" wx:for-index="idx" wx:for-item="bean" wx:key="idx">
                            <view style="display: flex;justify-content: space-between;margin-top: 20rpx">
                                <view>
                                    {{bean.realname}}
                                </view>
                                <view>
                                    {{bean.classname}}
                                </view>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </scroll-view>


</view>